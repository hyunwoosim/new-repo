<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>moyeora</title>
</head>
<body>

<div data-th-replace="header :: header">머리말</div>

<h1>templates/auth/findPassword.html</h1>

<form data-th-if="${status == 'request'}" data-th-action="@{sendEmail}" method="post">
  <div>
    <label>
      이메일:
      <input id="email" name="email" type="email" data-th-value="${email}">
    </label>
  </div>
  <button type="submit" onclick="return checkForm()">인증코드전송</button>
</form>

<div data-th-if="${status == 'email not found'}">
  <p data-th-text="${status}"></p>
</div>

<form data-th-if="${status == 'sent'}" data-th-action="@{verifyCode}" method="post">
  <div>
    <label>
      인증코드:
      <input id="code" name="code" type="text">
      <input name="authId" data-th-value="${authId}">
    </label>
  </div>
  <button type="submit" onclick="return checkForm()">확인</button>
</form>

<div data-th-text="${status}"></div>
<div data-th-if="${status == 'success'}">
  <p>가입하신 이메일로 임시 패스워드가 전송되었습니다. </p>
  <p><a data-th-href="@{form}">로그인</a> 후 재설정해 주시기 바랍니다.</p>
</div>

<div data-th-replace="footer :: footer">꼬리말</div>

<script>
  function checkForm() {
    var email = document.getElementById("email").value;
    if ( email == null || email == "" || email.length < 1 ) {
      alert("이메일을 입력하세요.");
      return false;
  }
    var code = document.getElementById("code").value;
    if ( code == null || code == "" || code.length < 1 ) {
      alert("인증코드를 입력해주세요.");
      return false;
    }
  }
</script>

</body>
</html>